# [주의] : 자가진단 로직 변경으로 인해 작동하지 않습니다!!

# Auto Self-Check(ASC) : 자동 자가진단

=========
개요
---------

1. 뭐하는 프로그램의 코드인가?
2. 만들게 된 계기
3. 구동원리
4. 각 함수 설명
5. 프로그램 주의사항
6. 마치며...
7. 홍보(?)
8. 추가내용

***

## 1. 뭐하는 프로그램의 코드인가?
자동으로 자가진단을 진행하는 프로그램(ASC Program)의 코드 중 핵심코드(교육청 서버로 Data를 POST하는 부분)입니다.

***

## 2. 만들게 된 계기
1. 매일 아침에 진행하는 자가 진단이 너무 귀찮아서...
2. 자가 진단을 하는 것을 까먹지 않기 위해
3. 그냥 만들어보고 싶어서

***

## 3. 구동원리
1. 우선 사용자의 개인정보(학교 이름, 이름, 생년월일, 교육청 지역)를 입력받습니다.
2. 사용자가 입력한 "교육청 지역"의 나이스 주소를 알아냅니다.
3. 해당 나이스 주소뒤에 자가진단 주소를 붙여 학교코드를 알아냅니다.
4. 알아낸 학교코드를 이용해서 이름,생년월일,학교코드가 모두 포함된 코드(이하 개인코드라고 하겠습니다)를 발행받습니다.
5. 발행받은 코드를 이용해서 설문조사를 진행한 내용을 전송(POST)합니다.
6. 결과를 확인합니다.

***

## 4. 각 함수 설명
각 함수들은 "실행 순서"에 따라서 나열되었으며, 각 py파일의 수준은 실행되는 위치에 따라서 나누어뒀습니다.</br>

* ### Main.py
맨 처음 실행되는 Python 코드로, 사용자 정보를 변수로 입력받고, 각 함수 호출 및 결과조합, Error내용 출력 등을 담당하고 있는 말그대로 핵심입니다.</br>
(그런데 기여도로 보면 가장 낮은....)</br>

* ### check_Server.py
<code>Main.py</code>에서 처음으로 call되는 함수로 <code>link = check_Server.main(Area)</code>부분에서 호출됩니다.</br>
<code>AREA_URL_LIST</code>딕셔너리(dictionary)에서 지역에 맞는 지역의 value값을 호출한 뒤, <code>requests</code>모듈을 이용해서 해당 서버가 정상적으로 작동중인지 확인합니다.</br>
그럴일을 거의 없겠지만, 나이스 서버가 뻗었는지 확인용입니다..ㅎㅎ</br>

* ### get_SchoolName.py
<code>Main.py</code>에서 <code>check_Server.py</code>다음으로 실행되는 함수로, 이전 함수가 준 URL과 사용자가 입력한 학교 이름을 이용해 학교 코드를 추출합니다.</br>
<code>(나이스 주소)/stv_cvd_co00_003.do</code>에 학교 이름을 POST한 후 검색결과 중 검색결과의 맨 처음의 학교 코드(firstSchulCode)를 추출합니다.</br>

* ### get_CrtfcNoEncpt.py
<code>get_SchoolName.py</code>에서 실행되는 함수로, <code>(나이스 주소)/stv_cvd_co00_012.do</code>에 학교 코드, 학생 이름, 생년월일을 모두 POST합니다.</br>
POST한 결과로 개인코드가 발행됩니다.</br>

* ### post_ASC.py
<code>get_CrtfcNoEncpt.py</code>에서 얻어낸 개인코드와 설문조사 내용을 담아 <code>(나이스 주소)/stv_cvd_co01_000.do</code>로 POST시킵니다.</br>
출력 결과중 <code>rtnRsltCode</code>가 'SUCCESS'라면 성공, 아니라면 실패입니다.</br>

***

## 5. 프로그램 주의사항
* 이 프로그램을 그대로 쓰실 분은 다음 주의사항을 지켜주셔야 정상적으로 자가진단이 완료 됩니다.</br>
* Area의 변수는 <code>check_Server.py</code>의 <code>AREA_URL_LIST</code>에 있는 '경기','서울'등으로 적어주셔야 정상작동합니다.</br>
* 위 <code>get_SchoolName.py</code>의 설명에서 봤듯이, "맨 처음 있는 학교의 학교 코드를 추출함으로, 중복이름등에 취약한 구조입니다. 이름을 "정확하게" 적어주셔야 합니다.</br>
* 생년월일은 040101과 같이 6자리로 '만' 적어주셔야 작동합니다.</br>
(이 프로그램은 '<code>requests</code>' 모듈의 설치가 필요합니다.)</br>

***

## 6. 마치며
Python은 정말 무궁무진합니다! 이러다가 App도 Python으로 바뀌는게 아닌지...ㅋㅋㅋ</br>
+근데 GUI할 때랑 Pyinstaller할 때는 죽는줄 알았습니다... 추후 쉽게 하실 수 있도록 정리해서 올리겠습니다!</br>
다음에는 Pyinstaller가 아니라 Py2exe를 이용해서 프로그램을 제작하는게 목표입니다!</br>
(가능하면 Py2app로 크로스 플랫폼까지...)</br>

***

## 7. 홍보
Pyqt5를 이용해서 GUI 버전으로 제작한 버전은
[[다운로드 페이지로 이동]](http://acs-program.kro.kr/)에서 다운로드해서 사용해 주시고 평가해 주시면 감사드리겠습니다!</br>
(어플은 [[다운로드 페이지로 이동]](https://onestore.co.kr/userpoc/apps/view?pid=0000750469#)에서 다운로드받으실 수 있습니다!)</br>
+ 혹시 블로그 등에서 사용하신다면 출처를 남겨주시면 매우 감사드리겠습니다</br>
+ 코로나가 종식돼서 이 프로그램이 무용지물이 되는 날이 빨리 오기를 기원합니다!</br>

## 8. 추가내용
* 몇일 내로 txt File를 Read하는 버전도 올리겠습니다.<br>
* 긴글 읽어주셔서 감사합니다!<br>

</br></br></br> Made By K.S.H(김세현)

